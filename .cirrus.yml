# This file is auto-generated by tools/cirrus_gen_yml.sh -- do not edit manually!

release_linux_x86_64_download_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_x86_64"
    reupload_on_changes: true
  build_script:
    - "./tools/cirrus_build_project.sh plain-binaries release linux x86_64 0"
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1

release_linux_x86_64_gcc_para1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 8
    memory: 16G
  timeout_in: 120m
  out_release_linux_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh gcc release linux x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 8
  depends_on:
    - "release_linux_x86_64_download"

release_linux_x86_64_goeasyconfig_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh goeasyconfig release linux x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_linux_x86_64_gcc_para1"

release_linux_x86_64_ncdns_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh ncdns release linux x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_linux_x86_64_goeasyconfig_1"

release_linux_x86_64_ncprop279_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh ncprop279 release linux x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_linux_x86_64_ncdns_1"

release_linux_x86_64_plain-binaries_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh plain-binaries release linux x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_linux_x86_64_ncprop279_1"

release_linux_x86_64_release_nosign_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh release release linux x86_64 1"
  binaries_artifacts:
    path: "release/**/*"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  only_if: $CIRRUS_REPO_OWNER != "namecoin" || "$CIRRUS_PR" != ""
  depends_on:
    - "release_linux_x86_64_plain-binaries_1"

release_linux_x86_64_release_sign_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_linux_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh release release linux x86_64 1"
  binaries_artifacts:
    path: "release/**/*"
  only_if: $CIRRUS_REPO_OWNER == "namecoin" && "$CIRRUS_PR" == ""
  env:
    SIGN_BUILD: 1
    SIGN_KEY: ENCRYPTED[33d4594d76774e6447dfd9fabee90f6214b34e209fa1c1c2ce93ed1a40447a235b013b78afe85db52d5561651a821be1]
    HOME: /root
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_linux_x86_64_plain-binaries_1"

release_linux_i686_download_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_i686"
    reupload_on_changes: true
  interrupted_ab_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_i686"
    reupload_on_changes: true
  interrupted_ac_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_i686"
    reupload_on_changes: true
  build_script:
    - "./tools/cirrus_build_project.sh plain-binaries release linux i686 0"
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1

release_linux_i686_gcc_para1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 8
    memory: 16G
  timeout_in: 120m
  out_release_linux_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_i686"
    reupload_on_changes: true
  interrupted_ab_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_i686"
    reupload_on_changes: true
  interrupted_ac_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh gcc release linux i686 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 8
  depends_on:
    - "release_linux_i686_download"

release_linux_i686_goeasyconfig_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_i686"
    reupload_on_changes: true
  interrupted_ab_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_i686"
    reupload_on_changes: true
  interrupted_ac_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh goeasyconfig release linux i686 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_linux_i686_gcc_para1"

release_linux_i686_ncdns_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_i686"
    reupload_on_changes: true
  interrupted_ab_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_i686"
    reupload_on_changes: true
  interrupted_ac_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh ncdns release linux i686 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_linux_i686_goeasyconfig_1"

release_linux_i686_ncprop279_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_i686"
    reupload_on_changes: true
  interrupted_ab_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_i686"
    reupload_on_changes: true
  interrupted_ac_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh ncprop279 release linux i686 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_linux_i686_ncdns_1"

release_linux_i686_plain-binaries_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_i686"
    reupload_on_changes: true
  interrupted_ab_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_i686"
    reupload_on_changes: true
  interrupted_ac_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh plain-binaries release linux i686 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_linux_i686_ncprop279_1"

release_linux_i686_release_nosign_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_i686"
    reupload_on_changes: true
  interrupted_ab_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_i686"
    reupload_on_changes: true
  interrupted_ac_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh release release linux i686 1"
  binaries_artifacts:
    path: "release/**/*"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  only_if: $CIRRUS_REPO_OWNER != "namecoin" || "$CIRRUS_PR" != ""
  depends_on:
    - "release_linux_i686_plain-binaries_1"

release_linux_i686_release_sign_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_linux_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_linux_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_linux_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_linux_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_linux_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_linux_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_linux_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_linux_i686"
    reupload_on_changes: true
  interrupted_ab_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_linux_i686"
    reupload_on_changes: true
  interrupted_ac_release_linux_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_linux_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh release release linux i686 1"
  binaries_artifacts:
    path: "release/**/*"
  only_if: $CIRRUS_REPO_OWNER == "namecoin" && "$CIRRUS_PR" == ""
  env:
    SIGN_BUILD: 1
    SIGN_KEY: ENCRYPTED[33d4594d76774e6447dfd9fabee90f6214b34e209fa1c1c2ce93ed1a40447a235b013b78afe85db52d5561651a821be1]
    HOME: /root
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_linux_i686_plain-binaries_1"

release_windows_x86_64_download_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_x86_64"
    reupload_on_changes: true
  build_script:
    - "./tools/cirrus_build_project.sh plain-binaries release windows x86_64 0"
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1

release_windows_x86_64_mingw-w64_para1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 8
    memory: 16G
  timeout_in: 120m
  out_release_windows_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh mingw-w64 release windows x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 8
  depends_on:
    - "release_windows_x86_64_download"

release_windows_x86_64_goeasyconfig_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh goeasyconfig release windows x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_windows_x86_64_mingw-w64_para1"

release_windows_x86_64_ncdns_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh ncdns release windows x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_windows_x86_64_goeasyconfig_1"

release_windows_x86_64_ncprop279_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh ncprop279 release windows x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_windows_x86_64_ncdns_1"

release_windows_x86_64_plain-binaries_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh plain-binaries release windows x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_windows_x86_64_ncprop279_1"

release_windows_x86_64_release_nosign_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh release release windows x86_64 1"
  binaries_artifacts:
    path: "release/**/*"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  only_if: $CIRRUS_REPO_OWNER != "namecoin" || "$CIRRUS_PR" != ""
  depends_on:
    - "release_windows_x86_64_plain-binaries_1"

release_windows_x86_64_release_sign_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_windows_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh release release windows x86_64 1"
  binaries_artifacts:
    path: "release/**/*"
  only_if: $CIRRUS_REPO_OWNER == "namecoin" && "$CIRRUS_PR" == ""
  env:
    SIGN_BUILD: 1
    SIGN_KEY: ENCRYPTED[33d4594d76774e6447dfd9fabee90f6214b34e209fa1c1c2ce93ed1a40447a235b013b78afe85db52d5561651a821be1]
    HOME: /root
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_windows_x86_64_plain-binaries_1"

release_windows_i686_download_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_i686"
    reupload_on_changes: true
  interrupted_ab_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_i686"
    reupload_on_changes: true
  interrupted_ac_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_i686"
    reupload_on_changes: true
  build_script:
    - "./tools/cirrus_build_project.sh plain-binaries release windows i686 0"
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1

release_windows_i686_mingw-w64_para1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 8
    memory: 16G
  timeout_in: 120m
  out_release_windows_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_i686"
    reupload_on_changes: true
  interrupted_ab_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_i686"
    reupload_on_changes: true
  interrupted_ac_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh mingw-w64 release windows i686 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 8
  depends_on:
    - "release_windows_i686_download"

release_windows_i686_goeasyconfig_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_i686"
    reupload_on_changes: true
  interrupted_ab_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_i686"
    reupload_on_changes: true
  interrupted_ac_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh goeasyconfig release windows i686 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_windows_i686_mingw-w64_para1"

release_windows_i686_ncdns_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_i686"
    reupload_on_changes: true
  interrupted_ab_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_i686"
    reupload_on_changes: true
  interrupted_ac_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh ncdns release windows i686 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_windows_i686_goeasyconfig_1"

release_windows_i686_ncprop279_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_i686"
    reupload_on_changes: true
  interrupted_ab_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_i686"
    reupload_on_changes: true
  interrupted_ac_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh ncprop279 release windows i686 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_windows_i686_ncdns_1"

release_windows_i686_plain-binaries_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_i686"
    reupload_on_changes: true
  interrupted_ab_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_i686"
    reupload_on_changes: true
  interrupted_ac_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh plain-binaries release windows i686 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_windows_i686_ncprop279_1"

release_windows_i686_release_nosign_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_i686"
    reupload_on_changes: true
  interrupted_ab_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_i686"
    reupload_on_changes: true
  interrupted_ac_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh release release windows i686 1"
  binaries_artifacts:
    path: "release/**/*"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  only_if: $CIRRUS_REPO_OWNER != "namecoin" || "$CIRRUS_PR" != ""
  depends_on:
    - "release_windows_i686_plain-binaries_1"

release_windows_i686_release_sign_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_windows_i686_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_windows_i686_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_windows_i686_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_windows_i686_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_windows_i686_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_windows_i686_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_windows_i686"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_windows_i686"
    reupload_on_changes: true
  interrupted_ab_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_windows_i686"
    reupload_on_changes: true
  interrupted_ac_release_windows_i686_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_windows_i686"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh release release windows i686 1"
  binaries_artifacts:
    path: "release/**/*"
  only_if: $CIRRUS_REPO_OWNER == "namecoin" && "$CIRRUS_PR" == ""
  env:
    SIGN_BUILD: 1
    SIGN_KEY: ENCRYPTED[33d4594d76774e6447dfd9fabee90f6214b34e209fa1c1c2ce93ed1a40447a235b013b78afe85db52d5561651a821be1]
    HOME: /root
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_windows_i686_plain-binaries_1"

release_osx_x86_64_download_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_osx_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_osx_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_osx_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_osx_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_osx_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_osx_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_osx_x86_64"
    reupload_on_changes: true
  build_script:
    - "./tools/cirrus_build_project.sh plain-binaries release osx x86_64 0"
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1

release_osx_x86_64_macosx-toolchain_para1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 8
    memory: 16G
  timeout_in: 120m
  out_release_osx_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_osx_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_osx_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_osx_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_osx_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_osx_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_osx_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh macosx-toolchain release osx x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 8
  depends_on:
    - "release_osx_x86_64_download"

release_osx_x86_64_goeasyconfig_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_osx_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_osx_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_osx_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_osx_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_osx_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_osx_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_osx_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh goeasyconfig release osx x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_osx_x86_64_macosx-toolchain_para1"

release_osx_x86_64_ncdns_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_osx_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_osx_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_osx_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_osx_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_osx_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_osx_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_osx_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh ncdns release osx x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_osx_x86_64_goeasyconfig_1"

release_osx_x86_64_ncprop279_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_osx_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_osx_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_osx_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_osx_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_osx_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_osx_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_osx_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh ncprop279 release osx x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_osx_x86_64_ncdns_1"

release_osx_x86_64_plain-binaries_1_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_osx_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_osx_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_osx_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_osx_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_osx_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_osx_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_osx_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh plain-binaries release osx x86_64 1"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_osx_x86_64_ncprop279_1"

release_osx_x86_64_release_nosign_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_osx_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_osx_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_osx_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_osx_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_osx_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_osx_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_osx_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh release release osx x86_64 1"
  binaries_artifacts:
    path: "release/**/*"
  env:
    SIGN_BUILD: 0
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  only_if: $CIRRUS_REPO_OWNER != "namecoin" || "$CIRRUS_PR" != ""
  depends_on:
    - "release_osx_x86_64_plain-binaries_1"

release_osx_x86_64_release_sign_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  timeout_in: 120m
  out_release_osx_x86_64_cache:
    folder: out
    fingerprint_script:
      - "echo out_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out"
  out1_release_osx_x86_64_cache:
    folder: out_cache1
    fingerprint_script:
      - "echo out1_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache1"
  out2_release_osx_x86_64_cache:
    folder: out_cache2
    fingerprint_script:
      - "echo out2_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache2"
  out3_release_osx_x86_64_cache:
    folder: out_cache3
    fingerprint_script:
      - "echo out3_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p out_cache3"
  git_release_osx_x86_64_cache:
    folder: git_clones
    fingerprint_script:
      - "echo git_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_clones"
  gitindex_release_osx_x86_64_cache:
    folder: git_index
    fingerprint_script:
      - "echo gitindex_release_osx_x86_64"
    reupload_on_changes: true
    populate_script:
      - "mkdir -p git_index"
  interrupted_aa_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partaa.folder
    fingerprint_script:
      - "echo interrupted_aa_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ab_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partab.folder
    fingerprint_script:
      - "echo interrupted_ab_release_osx_x86_64"
    reupload_on_changes: true
  interrupted_ac_release_osx_x86_64_cache:
    folder: tmp/interrupted_dirs.tar.gz.partac.folder
    fingerprint_script:
      - "echo interrupted_ac_release_osx_x86_64"
    reupload_on_changes: true
  checkpoint_background_script:
    # 110m caused the 2hr task timeout to be hit while the cache was uploading
    # for macosx-toolchain, which broke subsequent builds.
    - sleep 105m
    - ./tools/container-interrupt.sh
  build_script:
    - "./tools/cirrus_build_project.sh release release osx x86_64 1"
  binaries_artifacts:
    path: "release/**/*"
  only_if: $CIRRUS_REPO_OWNER == "namecoin" && "$CIRRUS_PR" == ""
  env:
    SIGN_BUILD: 1
    SIGN_KEY: ENCRYPTED[33d4594d76774e6447dfd9fabee90f6214b34e209fa1c1c2ce93ed1a40447a235b013b78afe85db52d5561651a821be1]
    HOME: /root
  env:
    CIRRUS_LOG_TIMESTAMP: true
    BUMP_DEPS: 0
    RBM_NUM_PROCS: 1
  depends_on:
    - "release_osx_x86_64_plain-binaries_1"

bump_task:
  compute_engine_instance:
    image_project: cirrus-images
    image: family/docker-builder
    platform: linux
    cpu: 1
    memory: 16G
  bump_script:
    - "./tools/cirrus_build_project.sh null null null null 0"
  env:
    BUMP_DEPS: 1
    RBM_NUM_PROCS: 1
    DEPLOY_KEY: ENCRYPTED[7969cc42abbc36c75c5673f2227e2eeec92577391c28c678243f95e01edffa17137e52cbddbe3e409cdab78a637edec5]
    PR_TOKEN: ENCRYPTED[91c45714bbbcf5b1fbb124475368332fcec4020258c5c4316ea9d07e3933982c6d179b925d6f7488978528ca99a737f3]
  only_if: $CIRRUS_REPO_OWNER == "namecoin" && $CIRRUS_PR == ""
